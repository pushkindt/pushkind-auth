# AGENTS.md

This file provides guidance to AI code generators when working with the code in this repository.

## Development Commands

**Build:**
```bash
cargo build --verbose
```

**Run Tests:**
```bash
cargo test --verbose
```

**Lint (Clippy):**
```bash
cargo clippy --tests -- -Dwarnings
```

## Code Architecture

This is a Rust Actix web application.
The codebase is organized into layersseveral main modules:

### Core Modules

- **`domain`** - Domain and DTO-level structs
- **`forms`** - HTML forms. Inner module structure mimics `routes`
- **`models`** - Diesel representation of the domain structs
- **`repository`** - Traits and structs to handle data-persistence
- **`routes`** - Actix routes, which are thin wrappers over services
- **`services`** - Core logic for handling routes. Inner module structure mimics `routes`
- **`middleware`** - Actix middleware to handle cookie-bases SSO authentication
- **`schema`** - Diesel-autogenerated database schema definitions

### Key Development Rules

- Use idiomatic Rust everywhere
- Use thiserror for error definitions, avoid anyhow::Result
- Define error types inside their unit of fallibility
- Run `cargo clippy` before all commits - trust Clippy's guidance
- Document all public APIs and breaking changes
